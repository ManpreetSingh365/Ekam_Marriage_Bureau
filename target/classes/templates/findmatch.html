<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	th:replace="~{base :: parent(~{::#content},~{::title},~{::script})}">

<head>
	<title>Find Match</title>
	<link href="https://cdn.jsdelivr.net/npm/flowbite@2.4.1/dist/flowbite.min.css" rel="stylesheet" />
</head>

<body>

	<div id="content">
		<div id="bgImageAuto">
			<div class="flex justify-center items-center min-h-screen my-5">
				<!-- Card -->
				<div
					class="block p-6 py-4 border-t-[10px] border-orange bg-gray-300 w-full max-w-2xl sm:max-w-xl md:max-w-2xl lg:max-w-3xl mx-auto rounded-xl shadow hover:bg-gray-200 dark:bg-gray-800 dark:border-blue-700 dark:hover:bg-gray-700 backdrop-blur-lg bg-opacity-30">
					<form class="max-w-2xl mx-auto" method="get" th:action="@{/do-findmatch}"
						data-th-object="${userFormDetails}">
						<h5 class="text-3xl font-bold selfWritter text-center dark:text-white">What you see in your
							Dream Life Partner</h5>

						<!-- Gender -->
						<div class="mt-5">
							<fieldset>
								<legend class="sr-only">Gender</legend>
								<label
									class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Gender</label>
								<p data-th-if="${#fields.hasErrors('gender')}" data-th-errors="*{gender}"
									class="text-red-600"></p>

								<div class="flex items-center mb-4 space-x-3">
									<label
										class="text-blue-700 hover:text-white border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2 dark:border-blue-500 dark:text-blue-500 dark:hover:text-white dark:hover:bg-blue-500 dark:focus:ring-blue-800">
										<input data-th-field="*{gender}" id="gender-option-1" type="radio" name="gender"
											value="male" class="mr-3">
										Male
									</label>
									<label
										class="text-blue-700 hover:text-white border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2 dark:border-blue-500 dark:text-blue-500 dark:hover:text-white dark:hover:bg-blue-500 dark:focus:ring-blue-800">
										<input data-th-field="*{gender}" id="gender-option-2" type="radio" name="gender"
											value="female" class="mr-3">
										Female
									</label>
								</div>
							</fieldset>
						</div>

						<!-- Flex for Religion and Caste selection -->
						<div class="flex flex-wrap justify-between gap-4 mt-5">
							<!-- Religion -->
							<div class="flex-1 min-w-0 mx-2">
								<label for="religion"
									class="block mb-2 text-sm font-bold font-medium text-gray-900 dark:text-white">Religion
									<super class="text-red-600 ml-1 text-lg font-medium">*</super></label>
								<p data-th-if="${#fields.hasErrors('religion')}" data-th-errors="*{religion}"
									class="text-red-600"></p>
								<select data-th-field="*{religion}" id="religion" name="religion"
									class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full h-sm p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
									<option value="">Select Religions</option>
									<th:block th:each="religion : ${religions}">
										<option th:value="${religion}" th:text="${religion}"></option>
									</th:block>
								</select>
							</div>

							<!-- Caste -->
							<div class="flex-1 min-w-0 mx-2 mt-2" id="sikh-caste-section">
								<label for="sikh"
									class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Caste</label>
								<p data-th-if="${#fields.hasErrors('caste')}" data-th-errors="*{caste}"
									class="text-red-600"></p>

								<!-- Caste Dropdown -->
								<select data-th-field="*{caste}" id="caste" name="caste"
									class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
									<option value="">Select Caste</option>
								</select>
							</div>
						</div>

						<!-- Age & Height Section -->
						<div class="flex flex-wrap justify-between gap-4 mt-10">
						  <!-- Age -->
						  <div class="mx-2 w-full sm:w-1/2 lg:w-auto space-y-4 border border-2 rounded-xl border-blue-700 hover:border-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-600 p-4">
						    <label for="age" class="block mb-2 text-center text-sm font-medium text-gray-900 dark:text-white">
						      Choose Age
						    </label>
						    <small> Min. may be 19 and Max. may be 55+</small>
						    <p data-th-if="${#fields.hasErrors('minAge')}" data-th-errors="*{minAge}" class="text-red-600"></p>
						    <p data-th-if="${#fields.hasErrors('maxAge')}" data-th-errors="*{maxAge}" class="text-red-600"></p>

						    <div class="flex space-x-6">
						      <div>
						        <input data-th-field="*{minAge}" type="text" id="minAge"
						          class="shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-20 p-2 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 dark:shadow-sm-light"
						          placeholder="Enter Minimum Age" />
						      </div>
						      <div class="p-2"><b>-- To --</b></div>
						      <div>
						        <input data-th-field="*{maxAge}" type="text" id="maxAge"
						          class="shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-20 p-2 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 dark:shadow-sm-light"
						          placeholder="Enter Maximum Age" />
						      </div>
						    </div>
						  </div>

						  <!-- Height -->
						  <div class="mx-2 w-full sm:w-1/2 lg:w-auto space-y-4 border border-2 rounded-xl border-blue-700 hover:border-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-600 p-4">
						    <label for="height" class="block mb-2 text-center text-sm font-medium text-gray-900 dark:text-white">
						     Choose Height
						    </label>
						    <small> Height may vary 4 to 6.5 (in foot)</small>
						    <p data-th-if="${#fields.hasErrors('minHeight')}" data-th-errors="*{minHeight}" class="text-red-600"></p>
						    <p data-th-if="${#fields.hasErrors('maxHeight')}" data-th-errors="*{maxHeight}" class="text-red-600"></p>

						    <div class="flex space-x-2">
						      <div>
						        <input data-th-field="*{minHeight}" type="text" id="minHeight"
						          class="shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-20 p-2 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 dark:shadow-sm-light"
						          placeholder="Enter Minimum Height" />
						      </div>
						      <div class="p-2"><b>-- To --</b></div>
						      <div>
						        <input data-th-field="*{maxHeight}" type="text" id="maxHeight"
						          class="shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-20 p-2 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 dark:shadow-sm-light"
						          placeholder="Enter Maximum Height" />
						      </div>
						    </div>
						  </div>
						</div>

						<div class="flex flex-wrap gap-4 mt-10">
							<!-- Place of Living -->
							<div class="flex-1 min-w-0 mx-2 mb-5">
								<fieldset>
									<legend class="sr-only">Place of Living<super
											class="text-red-600 ml-1 text-lg font-medium">*</super>
									</legend>
									<label
										class="block mb-2 text-sm font-bold font-medium text-gray-900 dark:text-white">Place
										of Living<super class="text-red-600 ml-1 text-lg font-medium">*</super></label>
									<p data-th-if="${#fields.hasErrors('place')}" data-th-errors="*{place}"
										class="text-red-600 flex"> </p>

									<div class="flex items-center mb-4 space-x-3" id="place">
										<label
											class="text-blue-700 hover:text-white border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2 dark:border-blue-500 dark:text-blue-500 dark:hover:text-white dark:hover:bg-blue-500 dark:focus:ring-blue-800">
											<input data-th-field="*{place}" id="place-option-1" type="radio"
												name="place" value="Indian" class="mr-3">
											Indian
										</label>

										<label
											class="text-blue-700 hover:text-white border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2 dark:border-blue-500 dark:text-blue-500 dark:hover:text-white dark:hover:bg-blue-500 dark:focus:ring-blue-800">
											<input data-th-field="*{place}" id="place-option-2" type="radio"
												name="place" value="nri" class="mr-3">
											NRI
										</label>
									</div>
								</fieldset>
							</div>

							<!-- Married -->
							<div class="flex-1 min-w-0 mx-2 mb-5">
								<label for="marriedStatus"
									class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Married
									Status</label>
								<p data-th-if="${#fields.hasErrors('marriedStatus')}" data-th-errors="*{marriedStatus}"
									class="text-red-600"> </p>
								<select data-th-field="*{marriedStatus}" id="marriedStatus" name="marriedStatus"
									class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
									<option value="">Select Status from here</option>
									<option value="single">Single</option>
									<option value="married">Married</option>
									<option value="divorced">Divorced</option>
									<option value="widowed">Widowed</option>
								</select>
							</div>
						</div>

						<!-- Qualification and Occupation -->
						<div class="flex flex-wrap gap-4 mt-5">
							<!-- Qualification -->
							<div class="flex-1 min-w-0 mx-2 mb-5">
								<label for="qualification"
									class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Qualification</label>
								<p data-th-if="${#fields.hasErrors('qualification')}" data-th-errors="*{qualification}"
									class="text-red-600"> </p>
								<select data-th-field="*{qualification}" id="qualification" name="qualification"
									class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
									<option value="">Select Qualification</option>
									<th:block th:each="qualification : ${qualification}">
										<option th:value="${qualification}" th:text="${qualification}"></option>
									</th:block>
								</select>
							</div>

							<!-- Occupation -->
							<div class="flex-1 min-w-0 mx-2 mb-5">
								<label for="occupation"
									class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Occupation</label>
								<p data-th-if="${#fields.hasErrors('occupation')}" data-th-errors="*{occupation}"
									class="text-red-600"> </p>
								<select data-th-field="*{occupation}" id="occupation" name="occupation"
									class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
									<option value="">Select Occupation</option>
									<th:block th:each="occupation : ${occupation}">
										<option th:value="${occupation}" th:text="${occupation}"></option>
									</th:block>
								</select>
							</div>
						</div>


						<!-- Submit Button -->
						<center class="mt-6">
							<div class="mt-3">
								<button type="submit" id="findmatch-button"
									class="text-white container text-center bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-4 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
									Let's Find your Best Match
								</button>
							</div>
						</center>
					</form>
				</div>
			</div>
		</div>
	</div>

	<script>
		console.log("UserList page");

		document.getElementById('religion').addEventListener('change', function () {
			const religion = this.value;
			if (religion) {
				fetch(`/getCastes?religion=${religion}`)
					.then(response => response.json())
					.then(data => {
						const casteSelect = document.getElementById('caste');
						casteSelect.innerHTML = '<option value="">Select Caste</option>'; // Reset options
						data.forEach(caste => {
							const option = document.createElement('option');
							option.value = caste;
							option.textContent = caste;
							casteSelect.appendChild(option);
						});
					})
					.catch(error => console.error('Error fetching castes:', error));
			}
		});

	</script>
</body>

</html>